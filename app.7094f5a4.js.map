{"version":3,"sources":["../translation/chi.json","js/app.js"],"names":["module","exports","default_title","logo_brand","request","error","bad_url","timeout","network_error","bad_status","bad_body","status_code","other_status_codes","uploader","uploading_video","uploading_subtitle","uploaded","failed_to_upload_video","failed_to_upload_subtitle","native_client","attempting_to_launch","attempting_to_connect","prompt_part1","prompt_part2","prompt_part3","prompt_part4","prompt_part5","connected","incompatible","version_unknown","disconnected","platform_error","unknown","page","portal","page_title","add_files","add_files_empty_state","support_video_format","support_subtitle_format","choose_presets","start_processing","remove_picked_video","batch_remove_picked_videos","abort_removal_of_picked_videos","with_subtitle_badge","without_subtitle_badge","prompt_already_uploaded_subtitle","replace_subtitle","remove_subtitle","keep_current_subtitle","search_box_placeholder","btn_review_subtitle","btn_add_subtitle","btn_delete_project","btn_edit_project","deletion_confirmation","have_upload","project","nav","save_project","back_to_portal","preview_project","export_project","prompt","successfully_saved","failed_to_save","failed_to_export","exporting","left_panel","save_project_and_leave","discard_changes_and_leave","prompt_unsaved_changes","stay_on_page","exporting_in_progress","frontend_version","native_client_version","project_size","stop_previewing","copy_all","copy_all_prompt","right_panel","hidden_content","restore_hidden_content","new_textual_content","project_size_label","btn_drag_handle","btn_convert_to_gif","btn_revert_back_to_frames","btn_add_text","btn_delete","btn_merge","input_width","input_fps","lable_width","lable_fps","btn_confirm","video_download_link","gif_download_link","view_type","leading_text","hidden","small","normal","large","processing","preset","custom","file_not_found","bad_parameters","cannot_decode_video","processing_status","not_started","started","completed","failed","project_not_found","project_export","source_file_not_found","media_files_missing","project_saving","navbar_link","title1","img_src1","link1","title2","img_src2","link2","title3","img_src3","link3","title4","img_src4","link4","title5","img_src5","link5","readStringifiedJson","str","JSON","parse","app","Elm","Main","init","flags","token","localStorage","translations","hostname","location","document","addEventListener","event","preventDefault","key","ctrlKey","keyCode","setImgIndex","ports","seekTime","subscribe","milliseconds","video","querySelector","currentTime","play","connectSocket","socket","WebSocket","websocketClosed","send","code","message","data","handleSocketEvent","handleProcessProgressEvent","handleProcessFailureEvent","uuid","Parameter","Id","Status","processingStatusUpdate","progress","Progress","status","reason","ErrorMsg","undoTrix","activeElement","editor","undo","redoTrix","redo","scrollIntoView","nodeID","getElementById","promptUserBeforeUnload","returnValue","history","pushState","window","url","action","imgToPreview","getElementsByClassName","len","length","imgArr","Array","modalImg","index","getAttribute","i","id","pos","indexOf","newIndex","setAttribute","src","addBeforeUnloadPrompt","pathname","removeBeforeUnloadPrompt","removeEventListener","copyAll","msg","copyAllTarget","getSelection","selectAllChildren","prevImg","nextImg","RichTextPreview","HTMLElement","setContent","content","innerHTML","customElements","define","previousHref","href","onload","body","MutationObserver","mutations","forEach","mutation","_czc","push","observe","childList","subtree"],"mappings":"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","file":"app.7094f5a4.js","sourceRoot":"../web","sourcesContent":["module.exports={default_title:\"剪刀兔\",logo_brand:\"剪刀兔\",request:{error:{bad_url:\"请求的URL格式不正确\",timeout:\"请求超时\",network_error:\"无法连接网络\",bad_status:\"无法完成请求\",bad_body:\"返回数据的格式不正确\"},status_code:{400:\"请求格式不正确\",401:\"未认证\",403:\"禁止访问\",404:\"无法找到请求的资源\",413:\"请求实体太大\",422:\"请求语义不正确\",500:\"服务器端错误\",502:\"网关错误\",503:\"服务暂时不可用\",504:\"上游服务请求超时\",other_status_codes:\"无法完成请求 - 错误码：{{status_code}}\"}},uploader:{uploading_video:\"视频上传中\",uploading_subtitle:\"字幕上传中\",uploaded:\"上传完成\",failed_to_upload_video:\"视频上传失败，请刷新本页面后重试\",failed_to_upload_subtitle:\"字幕上传失败，请刷新本页面后重试\"},native_client:{attempting_to_launch:\"尝试启动中……\",attempting_to_connect:\"尝试连接中……\",prompt_part1:\"请\",prompt_part2:\"点击此处\",prompt_part3:\"启动剪刀兔客户端，如尚未安装，请\",prompt_part4:\"下载并运行客户端\",prompt_part5:\"。\",connected:\"已连接\",incompatible:\"本地客户端版本不兼容\",version_unknown:\"未知的本地客户端版本\",disconnected:\"无法连接本地客户端\",platform_error:\"请求的URL地址不正确\",unknown:\"未知状态\"},page:{portal:{page_title:\"视频列表-剪刀兔\",add_files:\"添加\",add_files_empty_state:\"点击添加视频或字幕文件\",support_video_format:\"支持视频格式：mp4, flv, avi, wmv, mov, webm, mpeg, m4v, mpg\",support_subtitle_format:\"支持字幕格式：srt, vtt\",choose_presets:\"选择视频处理预设\",start_processing:\"开始\",remove_picked_video:\"删除\",batch_remove_picked_videos:\"删除\",abort_removal_of_picked_videos:\"返回\",with_subtitle_badge:\"sub\",without_subtitle_badge:\"添加字幕\",prompt_already_uploaded_subtitle:\"您已上传过该视频的字幕\",replace_subtitle:\"更换\",remove_subtitle:\"移除\",keep_current_subtitle:\"返回\",search_box_placeholder:\"搜索\",btn_review_subtitle:\"更换或移除字幕\",btn_add_subtitle:\"添加字幕\",btn_delete_project:\"删除项目\",btn_edit_project:\"开始编辑\",deletion_confirmation:\"确定要删除吗？\",have_upload:\"已上传{{uploaded_num}}，剩余{{remain_num}}/{{max_num}}\"},project:{page_title:\"图文编辑-剪刀兔\",nav:{save_project:\"保存\",back_to_portal:\"返回列表\",preview_project:\"预览\",export_project:\"发布\"},prompt:{successfully_saved:\"保存成功\",failed_to_save:\"保存失败\",failed_to_export:\"发布失败\",exporting:\"正在发布中，请稍后...\"},left_panel:{save_project_and_leave:\"保存并离开\",discard_changes_and_leave:\"舍弃更改\",prompt_unsaved_changes:\"您的更改还未保存\",stay_on_page:\"继续编辑\",exporting_in_progress:\"发布中\",frontend_version:\"前端版本\",native_client_version:\"Native Client 版本\",project_size:\"当前图文总大小\",stop_previewing:\"关闭\",copy_all:\"复制至外网\",copy_all_prompt:\"按【Ctrl+C】复制内容，然后【Ctrl+V】粘贴至其他平台编辑器内。\"},right_panel:{hidden_content:\"已删除\",restore_hidden_content:\"恢复\",new_textual_content:\"新增文本\",project_size_label:\"当前图文总大小：\",btn_drag_handle:\"拖动\",btn_convert_to_gif:\"开启GIF\",btn_revert_back_to_frames:\"关闭GIF\",btn_add_text:\"添加文字段落\",btn_delete:\"删除\",btn_merge:\"合并至上个段落\",input_width:\"宽度\",input_fps:\"帧率\",lable_width:\"px\",lable_fps:\"fps\",btn_confirm:\"确定\",video_download_link:\"另存为小视频\",gif_download_link:\"另存为GIF\"},view_type:{leading_text:\"选择版式：\",hidden:\"无\",small:\"小图\",normal:\"中图\",large:\"大图\"}}},processing:{preset:{custom:\"自定义\"},error:{file_not_found:\"找不到待处理的文件\",bad_parameters:\"参数错误\",cannot_decode_video:\"视频无法解码\"}},processing_status:{not_started:\"未处理\",started:\"已开始\",completed:\"已处理\",failed:\"处理失败\"},project:{project_not_found:\"找不到请求的视频图文编辑项目\"},project_export:{source_file_not_found:\"无法找到视频源文件\",media_files_missing:\"无法找到图片源文件\"},project_saving:{source_file_not_found:\"无法找到视频源文件\"},navbar_link:{title1:\"剪刀兔官网\",img_src1:\"/assets/home.svg\",link1:\"https://www.editool.cn\",title2:\"常见问答\",img_src2:\"/assets/help.svg\",link2:\"https://www.editool.cn/docs/faq/\",title3:\"教程\",img_src3:\"/assets/library_books.svg\",link3:\"https://www.editool.cn/docs/\",title4:\"not_defined\",img_src4:\"not_defined\",link4:\"not_defined\",title5:\"not_defined\",img_src5:\"not_defined\",link5:\"not_defined\"}};","/* global _czc */\n\n\n// CSS\n\nimport '../css/app.pcss';\n\nimport '../vendors/trix.css';\n\n// Helpers \n\nconst readStringifiedJson = str => {\n  try {\n    return JSON.parse ( str );\n  }\n  catch ( error ) {\n    return;\n  }\n};\n\n// Translations\n\nimport translations from '../../translation/chi.json';\n\n// Elm\n\nimport { Elm } from '../../src/Main.elm';\n\nvar app = Elm.Main.init ({\n  flags: {\n    token: localStorage.token || null,\n    translations: translations,\n    hostname: location.hostname\n  }\n});\n\n\ndocument.addEventListener ( 'dragover', event => {\n  // prevent default to allow drop\n  event.preventDefault ();\n}, false );\n\ndocument.addEventListener ( 'drop', event => {\n  // prevent default action (open as link for some elements)\n  event.preventDefault ();\n}, false );\n\ndocument.addEventListener ( 'keydown', event => {\n  if ( event.key == 's' && event.ctrlKey ) {\n    event.preventDefault ();\n  }\n  else if ( event.key == 'e' && event.ctrlKey ) {\n    event.preventDefault ();\n  }\n  else if ( event.key == 'z' && event.ctrlKey ) {\n    event.preventDefault ();\n  }\n}, false );\n\n\ndocument.addEventListener('keydown', event => {\n  var keyCode = {\n    keyLeft: 37,\n    keyRight: 39\n  };\n  if (event.keyCode == keyCode.keyLeft) {\n    setImgIndex('previous');\n  }\n  else if (event.keyCode == keyCode.keyRight) {\n    setImgIndex('next');\n  }\n})\n\n\napp.ports.seekTime.subscribe ( milliseconds => {\n  const video = document.querySelector ( 'video#source-file' );\n  video.currentTime = milliseconds / 1000;\n  video.play ();\n});\n\n\nconst connectSocket = () => {\n  var socket = new WebSocket ( 'ws://localhost:16699' );\n\n  socket.addEventListener ( 'close', event => {\n    app.ports.websocketClosed.send ( event.code );\n  });\n\n  socket.addEventListener ( 'message', event => {\n    let message = JSON.parse ( event.data );\n    handleSocketEvent ( message['Command'], message );\n  });\n};\n\nconnectSocket ();\n\n\napp.ports.connectSocket.subscribe (() => {\n  connectSocket ();\n});\n\nconst handleSocketEvent = ( event, data ) => {\n  switch ( event ) {\n    case 'ProcessProgressEvent':\n      handleProcessProgressEvent ( data );\n      break;\n\n    case 'ProcessFailureEvent':\n      handleProcessFailureEvent ( data );\n      break;\n\n    default:\n      break;\n  }\n};\n\n\nconst handleProcessProgressEvent = data => {\n  let uuid = data.Parameter.Id;\n\n  switch ( data.Parameter.Status ) {\n    case 1:\n      // When the video processing job is ready to start:\n      app.ports.processingStatusUpdate.send ({\n        Id: uuid,\n        Status: 1 // 'ready' \n      });\n      break;\n\n    case 2: {\n      // When the video processing job is ongoing:\n      let progress = data.Parameter.Progress;\n\n      app.ports.processingStatusUpdate.send ({\n        Id: uuid,\n        Status: 2, // 'ongoing'\n        Progress: progress\n      });\n\n      break;\n    }\n\n    case 3: {\n      // When the video processing job is completed:\n      app.ports.processingStatusUpdate.send ({\n        Id: uuid,\n        Status: 3 // 'completed'\n      });\n\n      break;\n    }\n\n    default:\n      // When God knows why an unknown status code is received:\n      break;\n  }\n};\n\n\nconst handleProcessFailureEvent = data => {\n  app.ports.processingStatusUpdate.send ({\n    uuid: data.Id,\n    status: 'failed',\n    reason: data.ErrorMsg\n  });\n};\n\n\napp.ports.undoTrix.subscribe (() => {\n  document.activeElement.editor.undo ();\n});\n\n\napp.ports.redoTrix.subscribe (() => {\n  document.activeElement.editor.redo ();\n});\n\n\napp.ports.scrollIntoView.subscribe ( nodeID => {\n  document.getElementById ( nodeID ).scrollIntoView ( true );\n});\n\n\nconst promptUserBeforeUnload = event => {\n  event.preventDefault ();\n  event.returnValue = '';\n  /*\n      Case: Uesr click go-back button -> Prompt(leave or cancel ?) -> Cancel\n    ----------------------------------------------------------------------------------------------\n      Probs: In this case, although the \"promptUserBeforeUnload\" prevent the redirection, the url was changed.\n    -----------------------------------------------------------------------------------------------------------\n      Solution: To avoid the troubles brought by the changed url, we have to: (1) get the url of current page (2) push the url to history\n  */\n  history.pushState(null, \"\", window.url); // (2) push the url to history\n};\n\napp.ports.addBeforeUnloadPrompt.subscribe (() => {\n  window.addEventListener ( 'beforeunload', promptUserBeforeUnload );\n  window.url = location.pathname; // (1) get the url of currentpage\n});\n\n\napp.ports.removeBeforeUnloadPrompt.subscribe (() => {\n  window.removeEventListener ( 'beforeunload', promptUserBeforeUnload );\n});\n\n\napp.ports.copyAll.subscribe(msg => {\n  var copyAllTarget = document.getElementById('copyAllTarget');\n  window.getSelection().selectAllChildren(copyAllTarget);\n});\n\n\nfunction setImgIndex(action) {\n  var imgToPreview = document.getElementsByClassName('imgToPreview');\n  var len = imgToPreview.length;\n  const imgArr = new Array(len);\n  var modalImg = document.getElementById('modalImg');\n  var index = modalImg.getAttribute('index');\n  for (var i = 0; i < len; i++) {\n    imgArr[i] = imgToPreview[i].id;\n  }\n  var pos = imgArr.indexOf(index);\n  switch (action) {\n    case 'next':\n      var newIndex = imgArr[(pos + 1) % len];\n      break;\n    case 'previous':\n      var newIndex = imgArr[(pos - 1 + len) % len];\n      break;\n    default:\n      var newIndex = index;\n      break;\n  }\n  modalImg.setAttribute('index', newIndex);\n  modalImg.src = document.getElementById(newIndex).src;\n}\n\n\napp.ports.prevImg.subscribe(() => {\n  setImgIndex('previous');\n});\n\n\napp.ports.nextImg.subscribe(() => {\n  setImgIndex('next');\n});\n// Web components\n\nclass RichTextPreview extends HTMLElement {\n  constructor () {\n    super ();\n  }\n\n  connectedCallback () {\n    this.setContent ();\n  }\n\n  attributeChangedCallback () { \n    this.setContent (); \n  }\n\n  static get observedAttributes () {\n    return [ 'content-value' ];\n  }\n\n  setContent () {\n    const content = this.getAttribute ( 'content-value' );\n    this.innerHTML = content;\n  }\n}\n\ncustomElements.define ( 'rich-text-preview', RichTextPreview );\n\n\n// Analytics \n\nlet previousHref = document.location.href;\n\nwindow.onload = () => {\n  let body = document.querySelector ( 'body' );\n\n  let observer = new MutationObserver ( mutations => {\n    mutations.forEach ( mutation => {\n      if ( document.location.href != previousHref ) {\n        previousHref = document.location.href;\n        _czc.push ([ '_trackPageview', location.pathname ]);\n      }\n    });\n  });\n\n  const config = {\n    childList: true,\n    subtree: true\n  };\n\n  observer.observe ( body, config );\n};\n\n\n\nexport default {\n  app: app\n};"]}